<script type="text/javascript" src="/assets/fancybox/jquery.fancybox.js"></script>
<script type="text/javascript" src="/assets/js/jquery.lazyload.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('footer .nav a.ac').tooltip({trigger:'manual'}).tooltip('show');
    $('footer .nav a').not('.ac').tooltip();
    $('.hover-btn a').tooltip();
    
    if($(window).width()>1000){
        $(".origin").fancybox({
            beforeLoad: function() {
                this.title = $(this.element).attr('exif');
            },
            padding:8,
            openEffect  : 'none',
            closeEffect : 'none',
            helpers : {
                title : {
                type : 'over'
                }
            }
        });
    }
    else{
      $('.fwidth .origin').click(function(event) {
        event.preventDefault();
      });
    }

    //get suitable image src according to the resolution.
    if ($(window).width()<=1024) {
        $('.fwidth .origin').each(function(){
          $imageaddress = $(this).attr('href').substring(0,$(this).attr('href').lastIndexOf("_"))+'_800';
          $(this).attr('href',$imageaddress);
          $(this).children('img.large').attr('data-original',$imageaddress);
        });
    }
    else if ($(window).width()>=2000) {
        $('.fwidth .origin').each(function(){
          $imageaddress = $(this).attr('href').substring(0,$(this).attr('href').lastIndexOf("_"))+'_1920';
          $(this).attr('href',$imageaddress);
          $(this).children('img.large').attr('data-original',$imageaddress);
        });
    }
    else if ($(window).width()>=1500) {
        $('.fwidth .origin').each(function(){
          $imageaddress = $(this).attr('href').substring(0,$(this).attr('href').lastIndexOf("_"))+'_1500';
          $(this).attr('href',$imageaddress);
          $(this).children('img.large').attr('data-original',$imageaddress);
        });
    }
    else if ($(window).width()>=1280) {
        $('.fwidth .origin').each(function(){
          $imageaddress = $(this).attr('href').substring(0,$(this).attr('href').lastIndexOf("_"))+'_1280';
          $(this).attr('href',$imageaddress);
          $(this).children('img.large').attr('data-original',$imageaddress);
        });
    }

    // if($('.fwidth .origin').first().attr("href").indexOf("res")>=0){
    //     $('.fwidth .origin').each(function(){
    //       $imageaddress = $(this).attr('href').substring(0,$(this).attr('href').lastIndexOf("!"));
    //       $(this).attr('href',$imageaddress);
    //       $(this).children('img.large').attr('data-original',$imageaddress);
    //     });
    // }


    $("img.thumb").lazyload({
      threshold : 400
    });
    $("img.large").lazyload({
      threshold : 400
    });
    $(".toHead").click(function(e) {
        e.preventDefault();
        $('html,body').animate(
          {scrollTop:0}, 500);
    });
});
$(window).resize(function(){
    $('footer .nav a.ac').tooltip({trigger:'manual'}).tooltip('show');
});
$(window).scroll(function() {
  if($(".fwidth").length){
      $bottom = $('.fwidth:last').offset().top + parseInt($('.fwidth:last').css('height')) - $(window).scrollTop() - parseInt($(window).height());
      if($bottom<0){
        $(".hover-btn").css('bottom', 8-$bottom+'px');
    }
      else{
        $(".hover-btn").css('bottom', '20px');
      }
    }
});
</script>